(function(win){const hams=(win.hams=win.hams||{});hams.tracking_domain='https://'+'col.cdi2.cookunity.com';hams.app_id="cu";hams.visit_info='_cdi2_id';hams.default_duid='180a3fbb-cb83-45b4-a7fd-714ada300b4e.1749731852.1749830737';hams.hams_uid='180a3fbb-cb83-45b4-a7fd-714ada300b4e.1749731852.1749830737';hams.duid="";hams.tracking_request_made=false;try{hams.hams_q=hams.hams_q||JSON.parse(localStorage.getItem("hams_q"))||[];}catch(err){hams.hams_q=hams.hams_q||[];}
hams.logging=true;hams.get_random_4_digit_string=function(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);};(hams.sync_cookie_and_local_storage_duid=function(){try{sync_duid_values();set_user_id();function sync_duid_values(){let cookie=parse_cookie_value(hams.visit_info);let local_storage_key=get_local_storage_visit_info();if(local_storage_key){let{local_storage_duid,local_storage_data,local_storage_created_time,}=get_local_storage_data(local_storage_key);if(cookie){let{server_cookie_name,serverCookieDuid,server_cookie_data,serverCookieCreatedTime,}=get_server_cookie_info(hams.visit_info);if(local_storage_duid!=serverCookieDuid){if(local_storage_created_time<serverCookieCreatedTime){update_cookie_with_local_storage_values(local_storage_key,local_storage_data,server_cookie_data);}else{update_local_storage_with_cookie_values(server_cookie_name,server_cookie_data);}}else{deleteOldLocalStorage(hams.visit_info);update_local_storage_with_cookie_values(server_cookie_name,server_cookie_data);}}else{let lsValue=localStorage.getItem(local_storage_key);set_cookie(local_storage_key,lsValue,365);return;}}else{if(cookie){let{server_cookie_name,server_cookie_data}=get_server_cookie_info(hams.visit_info);update_local_storage_with_cookie_values(server_cookie_name,server_cookie_data);}else{let new_visit_info=hams.visit_info
let defaultcookie_value=get_default_cookie_value();set_cookie(new_visit_info,defaultcookie_value,365);localStorage.setItem(new_visit_info,defaultcookie_value);}}}
function set_user_id(){let tracking_cookie=localStorage.getItem(get_local_storage_visit_info());try{tracking_cookie=tracking_cookie.split(".")[0];}
catch(err){hams.duid=hams.default_duid;}
hams.duid=tracking_cookie;}
function get_default_cookie_value(){return(hams.default_duid);}
function get_server_cookie_info(visit_info){var{server_cookie_name,server_cookie_value}=get_cookie_name_and_value(visit_info);var server_cookie_data=server_cookie_value.split(".");return{server_cookie_name,serverCookieDuid:server_cookie_data[0],serverCookieCreatedTime:server_cookie_data[1],server_cookie_data,};}
function get_cookie_name_and_value(cookie_name){let tracking_cookie=parse_cookie_value(cookie_name);var cookie_elems=tracking_cookie.split("=");return{server_cookie_name:cookie_elems[0],server_cookie_value:cookie_elems[1].split(";")[0],};}
function parse_cookie_value(){let match=document.cookie.match(`(${hams.visit_info}[^.]*).[^.]*=*[^.]+.[^.]+.([^.]+)..*`||[]);return match?match[0]:false;}
function set_cookie(cname,cvalue,exdays){const d=new Date();d.setTime(d.getTime()+exdays*24*60*60*1000);let expires="expires="+d.toUTCString();document.cookie=cname+
"="+
cvalue.split(";")[0]+
";"+
expires+
";path=/"+
";secure"+
";SameSite=Strict"+
";domain="+
win.location.hostname.replace("www","");}
function get_local_storage_visit_info(){try{let visit_info_name=hams.visit_info.split(".")[0];for(const key in localStorage){if(key.startsWith(visit_info_name)){return key;}}}catch(err){}
return false;}
function get_local_storage_data(ls_cookie_name){var local_storage_cookie_value=localStorage.getItem(ls_cookie_name);var local_storage_data=local_storage_cookie_value.split(".");return{local_storage_duid:local_storage_data[0],local_storage_created_time:local_storage_data[1]?local_storage_data[1]:Date.now(),local_storage_data:local_storage_data,};}
function update_local_storage_with_cookie_values(server_cookie_name,server_cookie_data){let cookie_value=server_cookie_data.join(".");localStorage.setItem(server_cookie_name,cookie_value);}
function deleteOldCookies(nameStartsWith)
{var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++)
{var cookie=cookies[i].trim();if(cookie.indexOf(nameStartsWith)===0){var cookieName=cookie.split("=")[0];document.cookie=cookieName+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain="+win.location.hostname.replace("www","");}}}
function deleteOldLocalStorage(nameStartsWith){for(const key in localStorage){if(key.startsWith(nameStartsWith)){localStorage.removeItem(key);}}}
function update_cookie_with_local_storage_values(local_storage_key,local_storage_data,server_cookie_data){local_storage_data[2]=server_cookie_data[2];let filtered_local_storage_data=local_storage_data.filter((value)=>value!==undefined&&value!=='');let cookie_value=filtered_local_storage_data.join(".");localStorage.setItem(local_storage_key,cookie_value);deleteOldCookies(hams.visit_info);set_cookie(local_storage_key,cookie_value,365);}}catch(err){hams.duid=hams.default_duid;}})();hams.prepareCustomEvent=function(custom_event,custom_context=[]){try{custom_event["ga_uid"]=hams.get_ga_uid();custom_event["fb_uid"]=hams.get_fb_uid();custom_event["_fbp"]=hams.get_value_from_cookie("_fbp");custom_event["_ga"]=hams.get_value_from_cookie("_ga");let dataObject={data:custom_event,context:custom_context,force:true,url:win.location.href,};hams.hams_q.push(dataObject);return true;}catch(prepareError){return false;}};hams.trackCustomEvent_dataLayer=function(event_name,send_option='post_body',custom_context=[]){try{let custom_event=hams.buildCustomEvent_dataLayer(event_name);hams.prepareCustomEvent(custom_event,custom_context);hams.send_hamstr_q(send_option);}catch(sendError){return false;}};hams.buildCustomEvent_dataLayer=function(event_name){try{let custom_event=hams.get_event_info_from_datalayer(event_name);custom_event["track_event"]=event_name;return custom_event;}catch(buildDataError){return{};}};hams.get_event_info_from_datalayer=function(event_name){let event_info={};try{for(var i=0;i<win.dataLayer.length;i++){if(win.dataLayer[i]["event"]==event_name)
event_info={...dataLayer[i]};}}catch(parseError){}
return event_info;};hams.get_value_from_cookie=function(key){try{let newKey=key;let regex=new RegExp(newKey+"=([^;]*)");return document.cookie.match(regex||[])[1];}catch(err){return"";}};hams.get_ga_uid=function(){try{let cookie_value=hams.get_value_from_cookie("_ga");return cookie_value.split(".")[2]||"";}catch{return"";}};hams.get_fb_uid=function(){try{let cookie_value=hams.get_value_from_cookie("_fbp");return cookie_value.split(".")[3]||"";}catch{return"";}};hams.get_sp_uid=function(){try{let cookie_value=document.cookie.match(`(_sp_id[^.]*).[^.]*=*[^.]+.[^.]+.([^.]+)..*`||[])[0].split('=')[1]
return cookie_value.split('.')[0]||"";}catch{return"";}};hams.send_hamstr_q=function(send_option='post_body'){let tracking_event;try{while(hams.hams_q.length>0){tracking_event=hams.hams_q.pop();let{data,contexts,aid,force,url}=tracking_event;if(!(force||!hams.tracking_request_made))return;if(aid)hams.app_id=aid;if(send_option=='post_body'){hams.track_post_body(data,contexts,url);}else if(send_option=='post_url'){hams.track_post_url(data,contexts,url);}else if(send_option=='get'){hams.track_get_url(data,contexts,url);}else{hams.track_get_url(data,contexts,url);}
hams.tracking_request_made=true;}}catch(err){hams.hams_q.unshift(tracking_event);}finally{try{localStorage.setItem("hams_q",JSON.stringify(hams.hams_q));}catch(err){}}};hams.track_get_url=function(tracking_data_json,context,url=win.location.href){let tracking_url=hams.get_tracking_url_parameters(tracking_data_json,context,url);hams.make_http_get_request(tracking_url);};hams.track_post_url=function(tracking_data_json,context,url=win.location.href){try{let url_parameter=hams.get_tracking_url_parameters(tracking_data_json,context,url);hams.make_http_post_request(url_parameter=url_parameter+"&tv=hams_p_u",post_body='{}');return true;}catch(err){return false;}};hams.track_post_body=function(tracking_data_json,context,url=win.location.href){let post_body_json=hams.get_tracking_body_json(tracking_data_json,context,url);hams.make_http_post_request(url_parameter="?duid="+hams.duid+"&tv=hams_p_b",post_body=post_body_json);return true;};hams.make_http_post_request=function(url_parameter="?duid="+hams.duid,post_body='{}',){let tracking_url=hams.tracking_domain+"/p"+url_parameter;if(hams.is_navigator_beacon_available()){win.navigator.sendBeacon(tracking_url,post_body);}else{var http=new XMLHttpRequest();http.open("POST",tracking_url,false);http.setRequestHeader("Content-Type","text/plain");http.send(post_body);}};hams.make_http_get_request=function(url_parameter=""){let tracking_url=hams.tracking_domain+"/p"+url_parameter+"&tv=hams_g";let http=new XMLHttpRequest();http.open("GET",tracking_url,false);http.send(null);if(http.status===200)return true;else return false;};hams.get_tracking_url_parameters=function(tracking_data_json,context,url){return("?"+
"duid="+
hams.duid+
"&aid="+
hams.app_id+
"&url="+
encodeURIComponent(url||win.location.href)+
"&refr="+
encodeURIComponent(document.referrer)+
"&tna=hams."+
hams.duid+
"&eid="+
hams.get_eid()+
"&dtm="+
Date.now()+
"&stm="+
Date.now()+
""+hams.get_url_parameters_from_data(tracking_data_json,context));};hams.get_tracking_body_json=function(tracking_data_json,context,url){let url_with_parameters=hams.get_tracking_url_parameters(tracking_data_json,context,url);url_with_parameters=url_with_parameters.split('?')[1];let post_body_json={};let key_value_pairs=url_with_parameters.split("&");key_value_pairs.forEach((pair)=>{let splitted=pair.split("=");let key=splitted[0];let value=splitted[1];post_body_json[key]=value;});return JSON.stringify(post_body_json);};hams.get_url_parameters_from_data=function(tracking_data_json={},context_json=[]){let event="pv";let result_url="";if(!is_empty(tracking_data_json)){event="ue";result_url+="&ue_px=";result_url+=hams.get_decoded_unstructevent_json(tracking_data_json);}
result_url+="&e="+event;if(context_json.length){result_url+="&cx="+hams.get_decoded_context_json(context_json);}
return result_url;function is_empty(obj){for(var prop in obj){if(Object.prototype.hasOwnProperty.call(obj,prop)){return false;}}
return JSON.stringify(obj)===JSON.stringify({});}};hams.get_decoded_unstructevent_json=function(unstruct_data_json){return btoa(JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:"iglu:com.hams/datalayer/jsonschema/1-0-0",data:{dataLayer:unstruct_data_json},},}));};hams.get_decoded_context_json=function(context_data_json){return btoa(JSON.stringify({schema:"iglu:com.hams/contexts/jsonschema/1-0-0",data:context_data_json,}));};hams.get_eid=function(){return(hams.get_random_4_digit_string()+
hams.get_random_4_digit_string()+
"-"+
hams.get_random_4_digit_string()+
"-"+
hams.get_random_4_digit_string()+
"-"+
hams.get_random_4_digit_string()+
"-"+
hams.get_random_4_digit_string()+
hams.get_random_4_digit_string()+
hams.get_random_4_digit_string());};hams.is_navigator_beacon_available=function(){return(win&&win.navigator&&"function"==typeof win.navigator.sendBeacon&&"function"==typeof win.Blob);};})(window);